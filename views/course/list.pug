extends ../layouts/default
include ../mixins/json

mixin recurse(category, link='/categories')
  li
    a(href=`${link}/${category.slug}`) #{category.title}
    if category.courses.length
      ul
        for course in category.courses
          li
            a(href=`/courses/${course.slug}`) #{course.title}

    if category.children && category.children.length
      ul
        for child in category.children
          +recurse(child, `/categories/`)

block main
  ul
    for category in categories
      +recurse(category)

  +json(categories)
