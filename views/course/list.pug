extends ../layouts/default
include ../mixins/json
include ../course/card

//- mixin recurse(category, link='/categories')
//-   li
//-     a(href=`${link}/${category.slug}`) !{category.title}
//-     if category.courses.length
//-       ul
//-         for course in category.courses
//-           li
//-             a(href=`/courses/${course.slug}`) Course: !{course.title} (#{course.status})

//-     if category.children && category.children.length
//-       ul
//-         for child in category.children
//-           +recurse(child, `/categories/${category.slug}`)

//- block main
//-   ul
//-     for category in categories
//-       +recurse(category)

block main
  .hero
    h1.heading GraphAcademy Courses
    p.byline An abundance of
      |
      |
      strong free
      |
      | content, direct from the source.

  .container
    .course-list
      .course-filters
        h2.course-filter-title.body-small Filter Courses

        .course-filter-options
          p.course-filter-list-item.course-filter-list-item--all(class=!slug ? 'course-filter-list-item--active' : '')
            a(href='/courses/') All Courses


          for category in categories
            div.course-filter-group(class=`category--${category.slug}`)
              if category.children.length
                h3.course-filter-header Filter By !{category.title}

                ul.course-filter-list
                  for child in category.children
                    li.course-filter-list-item(class=`category--${child.slug} ${child.slug === slug ? 'course-filter-list-item--active' : ''}`)
                      a(href=child.link) !{child.title}
              else
                p.course-filter-header.course-filter-list-item.no-padding(class=slug === category.slug ? 'course-filter-list-item--active' : '')
                  a(href=category.link) !{category.title}

      .course-grid
        for course in courses
          .course-grid-item
            +course(course, course.categories[0])



  .footer-cutout.cutout-wrapper(style='margin-top: 6rem')
      .cutout
          h2.heading-4 Get Started with
            |
            |
            strong GraphAcademy

          ul.inline-path
            li.inline-path-item
              | !{'<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 12C5.25 7.99594 8.49594 4.75 12.5 4.75C16.5041 4.75 19.75 7.99594 19.75 12C19.75 16.0041 16.5041 19.25 12.5 19.25C8.49594 19.25 5.25 16.0041 5.25 12Z" stroke="#7AD1FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M10.25 12.75L10.6837 13.6744C11.0275 14.407 12.0536 14.4492 12.4564 13.7473L14.75 9.75" stroke="#7AD1FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>'}
              | Register
            li.inline-path-item
              | !{'<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 12C5.25 7.99594 8.49594 4.75 12.5 4.75C16.5041 4.75 19.75 7.99594 19.75 12C19.75 16.0041 16.5041 19.25 12.5 19.25C8.49594 19.25 5.25 16.0041 5.25 12Z" stroke="#7AD1FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M10.25 12.75L10.6837 13.6744C11.0275 14.407 12.0536 14.4492 12.4564 13.7473L14.75 9.75" stroke="#7AD1FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>'}
              | Learn the Fundamentals
            li.inline-path-item
              | !{'<svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.25 12C5.25 7.99594 8.49594 4.75 12.5 4.75C16.5041 4.75 19.75 7.99594 19.75 12C19.75 16.0041 16.5041 19.25 12.5 19.25C8.49594 19.25 5.25 16.0041 5.25 12Z" stroke="#7AD1FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/><path d="M10.25 12.75L10.6837 13.6744C11.0275 14.407 12.0536 14.4492 12.4564 13.7473L14.75 9.75" stroke="#7AD1FF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>'}
              | Follow your career path
          p
            a.btn(href='/courses/') Get Started with GraphAcademy
