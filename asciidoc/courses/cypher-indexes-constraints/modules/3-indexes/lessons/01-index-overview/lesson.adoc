= Indexes in Neo4j
:type: quiz
:sandbox: true

//[.video]
//video::Po4k7vXGBIE[youtube,width=560,height=315]

//https://youtu.be/Po4k7vXGBIE

[.transcript]

== Indexes in Neo4j

An index in Neo4j is a data structure that allows the graph engine to retrieve data quickly.
All indexes in Neo4j require more storage in the graph, so you must ensure that you do not index everything!

A best practice is to create uniqueness constraints before you load your data.
After the data is loaded, you create additional indexes to make your queries perform faster.
Using indexes makes writing data slower, but retrieving it faster.

Constraints are implemented as indexes, but there are more types of indexes that you can create or use:

* b-tree
* Composite
* LOOKUP
* TEXT

[NOTE]
--
Full-text indexes are used differently from other indexes and will be covered in the next module
--

=== b-tree indexes

A b-tree is a common implementation of an index that enables you to sort values.
You can define a b-tree index on a property of a node label or relationship type.

A b-tree index can speed up the following  in your Cypher code:

* Equality checks `=`
* Range comparisons `>`,`+>=+`,`<`, `+<=+`
* List membership `IN`
* String comparisons `STARTS WITH`, `ENDS WITH`, `CONTAINS`
* Existence checks `IS NOT NULL`
* Spatial distance searches `distance()`
* Spatial bounding searches `point()`

This query could benefit from a b-tree index in the graph for the name property and the Person label:

[source,cypher]
----
MATCH (p:Person)
WHERE p.name CONTAINS 'Green'
RETURN p
----

=== Composite indexes

A composite index combines values from multiple properties for a node label or relationship type.
You create composite indexes when multiple properties are always tested together in a query.
During query planning, at most one index is used so it is beneficial in come cases to create a composite index when multiple properties need to be retrieved quickly.

For example, you might want to index on the Movie.year and the Movie.imdbRating.
If you created a composite index on these two properties, then this query would perform better:


[source,cypher]
----
MATCH (m:Movie) WHERE m.year > 1999 AND m.imdbRating = 8
RETURN m.title, m.year, m.imdbRating
----

=== LOOKUP indexes

There are two types of  LOOKUP indexes in a Neo4j database (release 4.3 and later).
These indexes are created automatically for you.

LOOKUP indexes are used to look up a node by its label or a relationship by its type.
Without these indexes queries would need to scan the entire set of nodes or relationships for some queries which is very inefficient.

[WARN]
You should not create or remove these types of indexes in the database as they are automatically created for you.

=== TEXT indexes

A TEXT index supports node or relationship property types that are strings.
It is optimized for queries that may specify `CONTAINS` or `ENDS WITH` in their filtering, but is also used for any type of test of a string property.

== Check your understanding

include::questions/1-select-answer.adoc[leveloffset=+1]
include::questions/2-select-answer.adoc[leveloffset=+1]

[.summary]
== Summary

In this lesson, you learned  about the types of indexes that Neo4j supports.
In the next lesson, you will learn how to create an index on a node property.
