= The Home Page
:type: challenge

If you load up the app at http://localhost:3000, you will see two lists on the home page; one for Popular Movies and one for Latest Releases.

Both of these lists are populated by a request to `http://localhost:3000/api/movies` with some additional parameters.
The route handler for this route is in `src/routes/movies.routes.js`.

// TODO: tag::movies.list[]

.src/routes/movies.routes.js
[source,js]
----
router.use(readTransactionMiddleware) // <1>

router.get('/', async (req, res) => {
    try {
        const { orderBy, order, limit, skip }
            = getPagination(req) // <2>

        const movieService = new MovieService(
            req.transaction
        ) // <3>

        const movies = await movieService.all(
            orderBy, order, limit, skip
        ) // <4>

        res.json(movies)
    }
    catch(e) {
        next(e)
    }
})
----

Within the above code block, you can see the following:

<1> The `readTransactionMiddleware` Middleware Function will be called for every route in this file, binding a `transaction` property to the `req` object.
<2> The `orderBy`, `order`, `limit` and `skip` values are extracted from the query string.  This allows us to apply sorting and pagination to the results.
<3> A new instance of the `MovieService` is called with the transaction passed through to the constructor.  We will use this to send our Cypher query to Neo4j.
<4> The results are retreived via the `all` method and are returned by the handler as JSON.



== The Movie Service

The magic happens in the MovieService, located at `src/services/movie.service.js`.
For this route we are concerned with the `all` method.

Within this method, we should use the open transaction (`this.transaction`) to run a Cypher query based on the