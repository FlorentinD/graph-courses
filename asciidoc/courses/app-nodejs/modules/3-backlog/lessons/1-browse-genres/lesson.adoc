= Browsing Genres
:type: challenge
:branch: 09-genre-list
:test-number: 09

If you click on the **Genres** link in the main navigation, you will be taken to a link:http://localhost:3000/genres[list of Genres^].
This list is populated by the API route at http://localhost:3000/api/movies, with the list being produced by `all` method within the link:{repository-blob}/main/src/services/genre.service.js[`GenreService`^].

.src/services/genre.service.js
[source,js,indent=0]
----
include::{repository-raw}/main/src/services/genre.service.js[tag=all]
----

In this challenge, you should run the following cypher statement in a **read transaction**:


.Getting a List of Genres
[source,cypher]
----
include::{repository-raw}/main/cypher/3-backlog/1-browse-genres/genre-details.cypher[]
----


== Your Task

* Modify the `all()` method on the `GenreService` to call the Neo4j database and return a list of properties ordered by genre name
* Each genre should have a name, the number of movies listed in that genre (`movies`) and a poster image (from the most popular movie in that genre)
* Remember to close the session and use the `toNativeTypes` function within a `map` function on `res.records` to convert the values to native types.


== Working Solution

[%collapsible]
.Click here to view the completed `all()` method.
====

.src/services/genre/genre.service.js
[source,js]
----
include::{repository-raw}/{branch}/src/services/genre.service.js[tag=all]
----

====

// Testing
include::../../../../includes/code.adoc[tag="test"]


== Verifying the Test

include::./questions/1-movie-count.adoc[leveloffset=+1]


[.summary]
== Lesson Summary

In this lesson we updated the `GenreService` to retrieve a list of movies from the database.

In the next lesson, we will look at retrieving the details of an individual genre.
