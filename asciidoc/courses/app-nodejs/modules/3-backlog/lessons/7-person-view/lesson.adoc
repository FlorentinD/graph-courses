= Person Profile
:type: challenge
:test-number: 15
:branch: 15-person-profile

If you click on a Person card anywhere on the website, you will be taken to a Person profile.
This API call is the same regardless of whether the person is an actor, director, or both.

We have already implemented the methods that populate the methods in the `MovieService` to get a list of Movies that the person has either acted in or directed.

But if we take a look at the `PeopleService` in `src/services/people.service.js`, we can see two methods that need to be implemented to complete this page: `findById` and `getSimilarPeople`.



== findById

The `findById` the method is currently hardcoded to return information about Al Pacino.

.src/services/people.service.js
[source,js,indent=0]
----
include::{repository-raw}/main/src/services/people.service.js[tag="findById"]
----

We will need to update this method to run the following cypher statement in a read transaction.
The query needs to return the properties for the person with the corresponding `tmdbId`, along with a count of the number of movies that the person has acted in and directed.

.Get Person information
[source,cypher,indent=0]
----
include::{repository-raw}/main/cypher/3-backlog/7-person-view/person-profile.cypher[]
----

Modify the `findById` method to execute this Cypher query within a read transaction.

[%collapsible]
.Click here to reveal the final `findById` method.
====

[source,js,indent=0]
----
include::{repository-raw}/{branch}/src/services/people.service.js[tag="findById"]
----

====



== getSimilarPeople

The `getSimilarPeople` should return a paginated list of similar people based on their second degree connections - either people who have acted in or have directed the person.

.src/services/people.service.js
[source,js,indent=0]
----
include::{repository-raw}/main/src/services/people.service.js[tag="getSimilarPeople"]
----

There could be a more clever algorithm for finding similar people by weighting the type of relationship differently, but for now, the following query will find a list of similar people based on the number of relationships in common.

.Get Similar People
[source,cypher,indent=0]
----
include::{repository-raw}/main/cypher/3-backlog/7-person-view/similar-people.cypher[]
----

Modify the `getSimilarPeople` method to execute this Cypher query within a read transaction.

[%collapsible]
.Click here to reveal the final `getSimilarPeople` method.
====

[source,js,indent=0]
----
include::{repository-raw}/{branch}/src/services/people.service.js[tag="getSimilarPeople"]
----

====


// Testing
include::../../../../includes/test.adoc[]


== Verifying the Test

include::./questions/1-similar-people.adoc[]


[.summary]
== Lesson Summary

In this lesson, you have implemented the final methods in the `PeopleService`.
