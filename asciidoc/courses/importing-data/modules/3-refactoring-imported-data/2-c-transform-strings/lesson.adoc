= Transforming String Properties
:type: challenge
:sandbox: true

In this Challenge, you will working with the data you previously imported with the Data Importer.

[IMPORTANT]
You can only perform the steps of this Challenge if you have imported the data in the previous Challenge.

This challenge has 4 steps:

. Transform the _Movie_ properties to numeric data.
. Transform the _RATED_ property to numeric data.
. Transform the _Person_ properties to dates.
. View the types stored in the graph.


Here is our target graph data model we are moving toward:

image::images/movie-data-model.png[Movie Data Model,width=600,align=center]

== Step 1: Transform the Movie properties to numeric data

Execute this code in the sandbox on the right.

[source,Cypher]
----
MATCH (m:Movie)
SET
m.imdbRating = toFloat(m.imdbRating),         // transformed to Double
m.year = toInteger(m.year),                   // transformed to Long
m.runtime = toInteger(m.runtime),             // transformed to Long
m.imdbVotes = toInteger(m.imdbVotes),         // transformed to Long
m.revenue = toInteger(m.revenue),             // transformed to Long
m.budget = toInteger(m.budget)                // transformed to Long
----

This code should have set 558 properties.

== Step 2: Transform the RATED property

. Copy this code to the sandbox on the right.
. Modify it to transform the _rating_ property of the _RATED_ relationship to an integer.
. Execute the code.

[source,Cypher]
----
MATCH ()-[r:RATED]->()
// transform the rating property to Long
----

Your modified code should have set 3594 properties.

== Step 3: Transform Person properties to dates

Execute this code in the sandbox on the right.

[source,Cypher]
----
MATCH (p:Person)
SET p.born = CASE p.born WHEN "" THEN null ELSE date(p.born) END
WITH p
SET p.died = CASE p.died WHEN "" THEN null ELSE date(p.died) END
----

This code should have set 888 properties.

== Step 4: View the types stored in the graph

Now that you have transformed properties in the graph to match what we want for numeric and date values in the graph, confirm that their types are correct:

[source,Cypher]
----
CALL apoc.meta.nodeTypeProperties()
----

Modify the code to check relationship properties.

include::./questions/verify.adoc[]

[.summary]
== Summary

In this challenge, you transformed some of the string data to numeric and date types to match our target data model.
In the next lesson, you learn how to transform multi-value properties into lists.

