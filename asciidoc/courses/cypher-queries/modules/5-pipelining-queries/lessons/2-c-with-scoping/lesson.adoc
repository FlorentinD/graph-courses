= Scoping variables
:type: challenge
:sandbox: true

== Using WITH to scope variables

Add a `WITH` clause to this query so that the movie with the highest revenue is returned:

[source,cypher]
----
WITH  'Tom Hanks' AS theActor
MATCH (p:Person)-[:ACTED_IN]->(m:Movie)
WHERE p.name = theActor and m.revenue IS NOT NULL
// Use WITH here to limit the movie node to 1 and order it by revenue
RETURN m.revenue AS Revenue, m.title AS Title
----

Then answer these questions:

include::./questions/q1.adoc[leveloffset=+1]
include::./questions/q2.adoc[leveloffset=+1]

[.summary]
== Summary

In this challenge, you modified a query to use a `WITH` clause to limit and order nodes.

In the next lesson, you will learn about pipelining queries.