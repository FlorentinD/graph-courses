= Identifying Relationships
:type: quiz
:order: 1

[.video]
video::xxxx[youtube,width=560,height=315]


[.transcript]
== Relationships are connections between entities

Connections are the *verbs* in your domain questions:

* What ingredients are *used* in a recipe?
* Who is *married* to this person?

At a glance, connections are straightforward things, but their micro- and macro-design are arguably the most critical factors in graph performance.
Using “connections are verbs” is a fine shorthand to get started, but there are other important considerations that you will learn about later in this course.

=== Naming relationships

Choosing good names (types) for the relationships in the graph is vital.
Relationship types need to be something that is intuitive to stakeholders and developers alike.
Relationship types cannot be confused as an entity name.

So in our example questions, we could define these relationship types:

* USES
* MARRIED

=== Relationship direction

When you create a relationship in Neo4j, a direction must either be specified explicitly or inferred by the left-to-right direction in the pattern specified.
At runtime, during a query, direction is typically not required.

In our example questions shown above, the *USES* relationship must be created to go from a Recipe node to an Ingredient node.

image::images/uses.png[Uses relationship,width=400,align=center]

The *MARRIED* relationship could be created to start in either node since this type of relationships is symmetric.

image::images/married.png[Married relationship,width=400,align=center]

=== Fanout

image::images/famout.png[Fanout,width=400,align=left]

Here, we have entities (Person, Address) represented not as a single node, but as a network or linked nodes.

This is an extreme example of fanout, and is almost certainly overkill for any real-life solution, but some amount of fanout can be very useful.

For example, splitting last names onto separate nodes helps answer the question, “Who has the last name Scott?” Similarly, having cities as separate nodes assists with the question, “Who lives in the same city as Patrick Scott?”

The main risk about fanout is that it can lead to very dense nodes, or supernodes. Supernodes need to be handled carefully.
== Relationships in the Movie graph

Now let's look at identifying the relationships for these domain questions:

. What people *acted* in a movie?
. What person *directed* a movie?
. What movies did a person *act* in?

Given these questions, we name the relationships:

* ACTED_IN
* DIRECTED

Furthermore, both of these relationship type start at Person nodes and end in Movie nodes.

Here is the supporting graph data model:

image::images/before-challenge.png[Starting movie relationships,width=400,align=center]

An here is the instance model to support this graph data model:

image::images/before-challenge-instance-model.png[Starting movie relationships instances,width=400,align=center]

Tom Hanks acted in two movies. Meg Ryan and Jack Nicholson each acted in one movie. Danny DeVito both acted in and directed the same movie.
Exploring relationships with this instance model we see that the movie Apollo 13 has a single actor in the graph, but the other two movies have two actors each.

== Check your understanding


include::questions/1-connections.adoc[]

include::questions/2-relationships.adoc[]


[.summary]
== Summary

In this lesson, you learned how to identify the relationships that will be added to your graph data model based upon the questions for your use cases.
In the next challenge, you will further develop the model by adding another relationship to the model.