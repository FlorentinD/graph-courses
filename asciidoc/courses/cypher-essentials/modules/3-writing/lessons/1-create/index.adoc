= Creating Data
:order: 1

In this lesson you will learn how to write Cypher statements to create nodes and relationships in the graph.

Using the Movies data model, you will create and execute Cypher statements to create Actors and Movies in our graph.

Watch this video to learn how to use Cypher to create nodes and relationships in the graph.

video::XXXXXXXXX[youtube,width=560,height=315]

////
Script: Creating Data

https://docs.google.com/document/d/1Y24YZDgNibkFEStlCVw7n6Qtyy20kQlYw0tZlXt_wT4/edit?usp=sharing

*Note to self:* Video may be re-recorded

////


We use the `CREATE` keyword to create a _pattern_ in the database.

After the `CREATE` keyword, we specify the pattern that we want to create.
Usually this will be a single node or a relationship between two nodes.

Suppose we want to create a node to represent **Michael Cain**.

Run this Cypher code:

[source,cypher]
----
CREATE (p:Person {name: 'Michael Cain'})
----

It creates a single node in the graph.

You can verify that the node was created.

Run this Cypher code:

[source,cypher]
----
MATCH (p:Person {name: 'Michael Cain'})
RETURN p
----

// browser::MATCH (n) RETURN count(n)[]

== Multiple Statements

We can also chain multiple `CREATE` statements together within a single Cypher code block.

Run this Cypher code:

[source,cypher]
----
CREATE (p:Person {name: 'Katie Holms'})
CREATE (m:Movie {title: 'The Dark Knight'})
CREATE (p)-[:ACTED_IN]->(m)
return p,m
----

It creates two nodes and a relationship between them.

Because we have specified the variables p and m, we can use them in the code to create the relationship between the two nodes.

== Mix and Match

These `CREATE` statements can be combined with other statements.
For example, if the Person and Movie nodes both already exist, we can find them using a `MATCH` statement before creating the relationship between them.

Run this Cypher code:

[source,cypher]
----
MATCH (p:Person {name: 'Michael Cain'})
MATCH (m:Movie {title: 'The Dark Knight'})
CREATE (p)-[:ACTED_IN]->(m)
RETURN p,m
----

It creates one relationship in the graph.

It is good practice to use the `MATCH` statement first to find any nodes in the database before creating the relationships.

== Setting Properties within a `CREATE` statement

There are two ways that you can set a property within a `CREATE` statement.

=== 1. Inline

As in the queries above, we have set the `name` property for the `:Person` node inline.
We can do the same thing when creating a relationship by specifing the properties within braces (`{` and `}`).

Run this Cypher code:

[source,cypher]
----
MATCH (p:Person {name: 'Michael Cain'})
CREATE (m:Movie {title: 'Batman Begins'})
CREATE (p)-[:ACTED_IN {roles: ['Alfred Penny']}]->(m)
RETURN p,m
----

In this block, we have created the `:ACTED_IN` relationship between the Michael Cain node and the Dark Knight node and set the roles property for this relationship to an array of values - containing one value, `Alfred Penny`.


=== 2. Using the `SET` keyword

We also have the option to use the `SET` keyword.
In the context of particular `CREATE`  or `MATCH` statement, you can set property values.

Run this Cypher code:

[source,cypher]
----
MATCH (p:Person)
MATCH (m:Movie)
WHERE p.name = 'Michael Cain' AND m.title = 'The Dark Knight'
CREATE (p)-[r:ACTED_IN]->(m)
SET r.roles = ['Alfred Penny']
RETURN p,m
----

Here we use the variable r to reference the relationship that is created. After it is created, we can set the roles property.

== Check your understanding

include::questions/1-create-keyword.adoc[]

include::questions/2-set-properties.adoc[]

